<!DOCTYPE html><html>
<head>
<title>Stog : Predefined functions</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<link rel="stylesheet" type="text/css" href="style.css"/>

</head><body>
<div id="page">
<div class="navbar navbar-fixed-top">
<div class="navbar-inner">


  <a class="brand" href="http://zoggy.github.com/stog/index.html">Stog</a>
  <ul class="nav">
    <li class=""><a href="http://zoggy.github.com/stog/index.html">Home</a></li>
    <li class="&lt;navbar-install/&gt;"><a href="http://zoggy.github.com/stog/install.html">Installation</a></li>
    <li class="active"><a href="http://zoggy.github.com/stog/doc.html">Documentation</a></li>
    <li class="&lt;navbar-blog/&gt;"><a href="http://zoggy.github.com/stog/blog.html">Blog</a></li>
    <li class=""><a href="http://zoggy.github.com/stog/about.html">?</a></li>
  </ul>
  <div class="nav pull-right">

  </div>

</div>
</div>

<div id="header">
<div class="page-title">Predefined functions</div>
</div>
<span/>
<div class="alert alert-warning">
This list is not yet complete.
</div>
<p>
The following functions are pre-defined and can be used in your pages,
articles and templates:
</p>

<ul class="toc"><li class="toc-section"><a href="#common">Common functions</a><ul class="toc"><li class="toc-subsection"><a href="#archive-tree">archive-tree</a></li><li class="toc-subsection"><a href="#article">article</a></li><li class="toc-subsection"><a href="#articles">articles</a></li><li class="toc-subsection"><a href="#comand-line">command-line</a></li><li class="toc-subsection"><a href="#ext-a">ext-a</a></li><li class="toc-subsection"><a href="#hcode">hcode</a></li><li class="toc-subsection"><a href="#icode">icode</a></li><li class="toc-subsection"><a href="#if">if</a></li><li class="toc-subsection"><a href="#include">include</a></li><li class="toc-subsection"><a href="#image">image</a></li><li class="toc-subsection"><a href="#ocaml">ocaml</a></li><li class="toc-subsection"><a href="#rssfeedx">rssfeed</a></li><li class="toc-subsection"><a href="#section">section and subsection</a></li><li class="toc-subsection"><a href="#site-descx">site-desc</a></li><li class="toc-subsection"><a href="#site-titlex">site-title</a></li><li class="toc-subsection"><a href="#site-url">site-url</a></li><li class="toc-subsection"><a href="#toc">toc and prepare-toc</a></li><li class="toc-subsection"><a href="#two-columns">two-columns</a></li></ul></li><li class="toc-section"><a href="#in-articles">Functions available in &quot;article.tmpl&quot; template</a><ul class="toc"><li class="toc-subsection"><a href="#article-url">article-url</a></li><li class="toc-subsection"><a href="#article-bodyx">article-body</a></li></ul></li></ul>

<p>For most of the functions, you should look at the generated XML to modify
your CSS stylesheet according to the classes used. You can start from
the <span class="icode">.less</span> files in the <span class="icode">doc</span> directory
of the stog sources.
</p>

<div class="section"><div class="section-title" id="common">Common functions</div>
<div class="subsection"><div class="subsection-title" id="archive-tree">archive-tree</div>
<span class="icode"><span class="hl kwa">&lt;archive-tree/&gt;</span>
</span> inserts the articles archive tree.
</div>

<div class="subsection"><div class="subsection-title" id="article">article</div>
<p>
<strong>Syntax:</strong>
<pre class="code-xml"><span class="hl kwa">&lt;article</span> <span class="hl kwb">href</span>=<span class="hl str">&quot;...&quot;</span><span class="hl kwa">&gt;</span>text<span class="hl kwa">&lt;/article&gt;</span>
</pre>
</p>
<p>
This will return a link to the article specified by its id. The id of an article
is the base name of its directory in your project. Refering to an unknown
article will raise an error.
</p>
<p>
If no text is given for the link, the title of the article will be used instead.
</p>
</div>

<div class="subsection"><div class="subsection-title" id="articles">articles</div>
<span class="icode"><span class="hl kwa">&lt;articles</span> <span class="hl kwb">max</span>=<span class="hl str">&quot;...&quot;</span><span class="hl kwa">/&gt;</span>
</span> inserts the list of
published articles.
The optional <span class="icode">max=&quot;n&quot;</span> attribute can be used to list only
the <span class="icode">n</span> last articles.
</div>

<div class="subsection"><div class="subsection-title" id="comand-line">command-line</div>
<span class="icode"><span class="hl kwa">&lt;command-line&gt;</span>
</span> works like
<a href="#hcode"><span class="icode"><span class="hl kwa">&lt;hcode&gt;</span>
</span></a>
with the <span class="icode">lang</span>
attribute already set to &quot;sh&quot;.
</div>

<div class="subsection"><div class="subsection-title" id="ext-a">ext-a</div>
<span class="icode"><span class="hl kwa">&lt;ext-a</span> attributes<span class="hl kwa">&gt;</span>...<span class="hl kwa">&lt;/ext-a&gt;</span>
</span> is reduced
to <span class="icode"><span class="hl kwa">&lt;span</span> <span class="hl kwb">class</span>=<span class="hl str">&quot;ext-a&quot;</span><span class="hl kwa">&gt;&lt;a</span> attributes<span class="hl kwa">&gt;</span>...&lt;<span class="hl kwa">/&gt;&lt;/ext-a&gt;</span>
</span>.
This can be used to add specific style link to external sites.
</div>

<div class="subsection"><div class="subsection-title" id="hcode">hcode</div>
<p>
<strong>Syntax:</strong>
<pre class="code-xml"><span class="hl kwa">&lt;hcode</span> <span class="hl kwb">lang</span>=<span class="hl str">&quot;...&quot;</span><span class="hl kwa">&gt;</span>your code<span class="hl kwa">&lt;/hcode&gt;</span>
</pre>
</p>
<p>
This function inserts the given pre-formatted code. It uses the
<span class="ext-a"><a href="http://www.andre-simon.de/doku/highlight/en/highlight.html"><span class="icode">highlight</span></a></span>
tool to add syntax highlighting. For example, the code examples of this page are
inserted using <pre class="code-xml"><span class="hl kwa">&lt;hcode</span> <span class="hl kwb">lang</span>=<span class="hl str">&quot;xml&quot;</span><span class="hl kwa">&gt;</span>...<span class="hl kwa">&lt;/hcode&gt;</span>
</pre>
</p>
</div>

<div class="subsection"><div class="subsection-title" id="icode">icode</div>
<span class="icode"><span class="hl kwa">&lt;icode&gt;</span>
</span> works like
<a href="#hcode"><span class="icode"><span class="hl kwa">&lt;hcode&gt;</span>
</span></a> but is used to
generate inline highlighted code instead of using a box.
</div>

<div class="subsection"><div class="subsection-title" id="if">if</div>
<p>
<strong>Syntax:</strong>
<pre class="code-xml"><span class="hl kwa">&lt;if</span> <span class="hl kwb">attr1</span>=<span class="hl str">&quot;value1&quot;</span> <span class="hl kwb">attr2</span>=<span class="hl str">&quot;value2&quot;</span> ...<span class="hl kwa">&gt;</span>
<span class="hl kwa">&lt;XML</span> tree used when all conditions are verified<span class="hl kwa">&gt;</span>
<span class="hl kwa">&lt;optional</span> XML tree used when at least one condition is not verified<span class="hl kwa">&gt;</span>
<span class="hl kwa">&lt;/if&gt;</span>
</pre>
</p>
<p>
The <span class="icode">if</span> function tests whether each condition expressed as <span class="icode">attr=&quot;value&quot;</span>
is verified. If so, the first XML child is returned, else the second one is returned.
To test the value of <span class="icode">attr</span>, <span class="icode">attr</span> is looked up in the current
environment. It its value is the same as the given value, the condition is verified.
</p>
<p>
The <span class="icode">&quot;value&quot;</span> part of the condition must be valid XML, and can contain
calls to functions, as in:
<pre class="code-xml"><span class="hl kwa">&lt;if</span> <span class="hl kwb">page-title</span>=<span class="hl str">&quot;&amp;lt;site-title&amp;gt;&quot;</span><span class="hl kwa">&gt;</span>....<span class="hl kwa">&lt;/if&gt;</span>
</pre>
</p>
<p>Other example: Testing whether a variable is empty to known whether to output
a block or not:
<pre class="code-xml"><span class="hl kwa">&lt;if</span> <span class="hl kwb">list</span>=<span class="hl str">&quot;&quot;</span><span class="hl kwa">&gt;</span>
<span class="hl kwa">&lt;span/&gt;</span>
<span class="hl kwa">&lt;div&gt;</span>The list is not empty, let's print it:<span class="hl kwa">&lt;ul&gt;&lt;list/&gt;&lt;/ul&gt;&lt;/div&gt;</span>
<span class="hl kwa">&lt;/if&gt;</span>
</pre>
</p>
</div>

<div class="subsection"><div class="subsection-title" id="include">include</div>
<p>
<strong>Syntax:</strong>
<pre class="code-xml"><span class="hl kwa">&lt;include</span> <span class="hl kwb">file</span>=<span class="hl str">&quot;template&quot;</span><span class="hl kwa">&gt;</span>...<span class="hl kwa">&lt;/include&gt;</span>
</pre>
</p>
<p>
This function will load the file <span class="icode">template</span> from the template directory
(or fail if the file does not exist). The contents of the file will then be evaluated.
The code between <span class="icode">&lt;include ...&gt;</span> and <span class="icode">&lt;/include&gt;</span>
is added to the environment used to evaluate the contents of the file, associated to
the name <span class="icode">contents</span>.
</p>
<p>
With the additional attribute <span class="icode">raw=&quot;true&quot;</span>, the contents of the loaded file
is considered as PCData. This is useful for example to load code.
</p>
<p>At last, all additional attributes to <span class="icode">&lt;include ...&gt;</span> will
be added to the environment used to evaluate the contents of the file.
</p>
<p>Here is an example. If we have the <span class="icode">foo.tmpl</span> file
in the template directory, with the following contents:
<pre class="code-xml"><span class="hl kwa">&lt;p&gt;</span> key=<span class="hl kwa">&lt;key/&gt;</span> value=<span class="hl kwa">&lt;contents/&gt; &lt;/p&gt;</span>
</pre>
The following code
<pre class="code-xml"><span class="hl kwa">&lt;include</span> <span class="hl kwb">file</span>=<span class="hl str">&quot;foo.tmpl&quot;</span> <span class="hl kwb">key</span>=<span class="hl str">&quot;bar&quot;</span><span class="hl kwa">&gt;</span>the value of bar<span class="hl kwa">&lt;/include&gt;</span>
</pre>
will be reduced to
<pre class="code-xml"><span class="hl kwa">&lt;p&gt;</span> key=bar value=the value of bar <span class="hl kwa">&lt;/p&gt;</span>
</pre>
</p>
</div>

<div class="subsection"><div class="subsection-title" id="image">image</div>
<p>
<strong>Syntax:</strong>
<pre class="code-xml"><span class="hl kwa">&lt;image</span> <span class="hl kwb">float</span>=<span class="hl str">&quot;[left|right]&quot;</span> <span class="hl kwb">src</span>=<span class="hl str">&quot;...&quot;</span> ...<span class="hl kwa">&gt;</span>legend<span class="hl kwa">&lt;/image&gt;</span>
</pre>
</p>
<p>
This generates an image using an <span class="icode">&lt;img .../&gt;</span> node. The legend is optional.
</p>
<p>
The <span class="icode">float</span> attribute can be used to change a class in the generated code,
so you can set the style of the image to be left or right floating.
</p>
<p>
Additional attributes are passed to the generated <span class="icode">img</span> node.
</p>
</div>

<div class="subsection"><div class="subsection-title" id="ocaml">ocaml</div>
<span class="icode"><span class="hl kwa">&lt;ocaml&gt;</span>
</span> works like
<a href="#hcode"><span class="icode"><span class="hl kwa">&lt;hcode&gt;</span>
</span></a>
with the <span class="icode">lang</span>
attribute already set to &quot;ocaml&quot;.
</div>

<div class="subsection"><div class="subsection-title" id="rssfeedx">rssfeed</div>
<span class="icode"><span class="hl kwa">&lt;rssfeed/&gt;</span>
</span> is available in pages an RSS feed is associated to,
like keywords page, ... It returns the url of the RSS feed.
</div>

<div class="subsection"><div class="subsection-title" id="section">section and subsection</div>
<p>
<strong>Syntax:</strong>
<pre class="code-xml"><span class="hl kwa">&lt;section</span> <span class="hl kwb">name</span>=<span class="hl str">&quot;...&quot;</span> <span class="hl kwb">title</span>=<span class="hl str">&quot;...&quot;</span><span class="hl kwa">&gt;</span>...<span class="hl kwa">&lt;/section&gt;</span>
<span class="hl kwa">&lt;subsection</span> <span class="hl kwb">name</span>=<span class="hl str">&quot;...&quot;</span> <span class="hl kwb">title</span>=<span class="hl str">&quot;...&quot;</span><span class="hl kwa">&gt;</span>...<span class="hl kwa">&lt;/subsection&gt;</span>
</pre>
</p>
This is used to insert sections and subsections, with a given title. The name,
if given, is used as id in the section title node.
</div>

<div class="subsection"><div class="subsection-title" id="site-descx">site-desc</div>
<span class="icode"><span class="hl kwa">&lt;site-desc&gt;</span>
</span> returns the site description as specified in the
main file.
</div>

<div class="subsection"><div class="subsection-title" id="site-titlex">site-title</div>
<span class="icode"><span class="hl kwa">&lt;site-title&gt;</span>
</span> returns the site title as specified in the
main file.
</div>

<div class="subsection"><div class="subsection-title" id="site-url">site-url</div>
<span class="icode"><span class="hl kwa">&lt;site-url&gt;</span>
</span> returns the site url as specified in the
main file.
</div>

<div class="subsection"><div class="subsection-title" id="toc">toc and prepare-toc</div>
<p>
<strong>Syntax:</strong>
<pre class="code-xml"><span class="hl kwa">&lt;prepare-toc</span> <span class="hl kwb">depth</span>=<span class="hl str">&quot;[1|2|...]&quot;</span><span class="hl kwa">&gt;</span>
...
<span class="hl kwa">&lt;toc&gt;</span>text<span class="hl kwa">&lt;/toc&gt;</span>
...
<span class="hl kwa">&lt;section</span> ...<span class="hl kwa">&gt;</span>
  <span class="hl kwa">&lt;subsection</span> ...<span class="hl kwa">&gt;</span>

  <span class="hl kwa">&lt;/subsection&gt;</span>
  ...
<span class="hl kwa">&lt;/section&gt;</span>
...
<span class="hl kwa">&lt;/prepare-toc&gt;</span>
</pre>
</p>
<p>
The <span class="icode"><span class="hl kwa">&lt;toc&gt;</span>
</span> node is used to insert a table of contents.
If a text is given, it is added ahead of the table of contents.
</p>
<p>
Since the <span class="icode">toc</span> node does not include the sections and subsections, it is
not sufficient to build the table of contents. So it will use what is returned by
the function associated to &quot;toc-contents&quot; in its environment.
</p>
<p>This function is added to the environment by the <span class="icode">prepare-toc</span> node,
which includes all the sections and subsections. The <span class="icode">depth</span> attribute
is used to specify the depth of the table of contents.
</p>
</div>

<div class="subsection"><div class="subsection-title" id="two-columns">two-columns</div>
<p>
<strong>Syntax:</strong>
<pre class="code-xml"><span class="hl kwa">&lt;two-columns&gt;</span>
<span class="hl kwa">&lt;XML</span> for left column<span class="hl kwa">/&gt;</span>
<span class="hl kwa">&lt;XML</span> for right column<span class="hl kwa">/&gt;</span>
<span class="hl kwa">&lt;/two-columns&gt;</span>
</pre>
</p>
<p>
This will put the two given XML nodes in a two-column layout.
</p>
</div>
</div>

<div class="section"><div class="section-title" id="in-articles">Functions available in &quot;article.tmpl&quot; template</div>
<div class="subsection"><div class="subsection-title" id="article-url">article-url</div>
<span class="icode"><span class="hl kwa">&lt;article-url&gt;</span>
</span> returns the final url of the current article.
</div>

<div class="subsection"><div class="subsection-title" id="article-bodyx">article-body</div>
<span class="icode"><span class="hl kwa">&lt;article-body&gt;</span>
</span> returns the body of the current article.
</div>
</div>



</div>
<footer id="bottombar">
</footer>
</body>
</html>