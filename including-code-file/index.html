<!DOCTYPE HTML><html>
<head>
<title>Stog : Including a code file (defering evaluation)</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<link rel="stylesheet" type="text/css" href="http://zoggy.github.com/stog/style.css"/>

</head><body>
<div id="page">
<div class="navbar navbar-fixed-top">
<div class="navbar-inner">


  <a class="brand" href="http://zoggy.github.com/stog/index.html">Stog</a>
  <ul class="nav">
    <li class="&lt;navbar-home/&gt;"><a href="http://zoggy.github.com/stog/index.html">Home</a></li>
    <li class="&lt;navbar-install/&gt;"><a href="http://zoggy.github.com/stog/install.html">Installation</a></li>
    <li class="&lt;navbar-doc/&gt;"><a href="http://zoggy.github.com/stog/doc.html">Documentation</a></li>
    <li class="active"><a href="http://zoggy.github.com/stog/blog.html">Blog</a></li>
    <li class="&lt;navbar-about/&gt;"><a href="http://zoggy.github.com/stog/about.html">?</a></li>
  </ul>
  <div class="nav pull-right">

  </div>

</div>
</div>

<div id="header">
<div class="article-navbar"><div class="navleft"><a href="../displaying-evaluated-ocaml-code/index.html">Displaying evaluated OCaml code</a></div><span/></div>
</div>
<aside><aside>
<div class="sidebar">
<div id="archives">Archives: <ul><li>2012<ul><li><a href="../2012_03.html">mars</a>(3)</li></ul></li></ul></div>
</div>
</aside>
</aside>
<div itemscope="" itemtype="http://schema.org/BlogPosting" id="article">
<div class="date">mardi 13 mars 2012</div>
<h1 itemprop="name">Including a code file (defering evaluation)</h1>
<link itemprop="url" href="http://zoggy.github.com/stog/including-code-file"/>
<div itemprop="articleBody" id="article-body">
<p>How to highlight a file inserted with <span class="icode"><span class="hl kwa">&lt;include</span> ...<span class="hl kwa">&gt;</span>
</span> ?
</p>

<p>
If you want to include and highlight for example the <span class="icode">style.less</span> file
in the template directory, you can try
<pre class="code-css"><span class="hl opt">&lt;</span>hcode raw<span class="hl opt">=</span><span class="hl str">&quot;true&quot;</span> lang<span class="hl opt">=</span><span class="hl str">&quot;css&quot;</span><span class="hl opt">&gt;&lt;</span>include file<span class="hl opt">=</span><span class="hl str">&quot;style.less&quot;</span><span class="hl opt">/&gt;&lt;/</span>hcode<span class="hl opt">&gt;</span>
</pre>
but this will only result in
<pre class="code-css"><span class="hl opt">&lt;</span>include file<span class="hl opt">=</span><span class="hl str">&quot;style.less&quot;</span><span class="hl opt">/&gt;</span>
</pre>
</p>
<p>This is because <span class="icode">&lt;hcode...&gt;</span> is evaluated immediately, displaying
its children nodes. What you need is to defer the evaluation of <span class="icode">&lt;hcode...&gt;</span>,
using the special <span class="icode">defer_</span> attribute:
<pre class="code-css"><span class="hl opt">&lt;</span>hcode raw<span class="hl opt">=</span><span class="hl str">&quot;true&quot;</span> lang<span class="hl opt">=</span><span class="hl str">&quot;css&quot;</span> defer_<span class="hl opt">=</span><span class="hl str">&quot;1&quot;</span><span class="hl opt">&gt;&lt;</span>include file<span class="hl opt">=</span><span class="hl str">&quot;style.less&quot;</span><span class="hl opt">/&gt;&lt;/</span>hcode<span class="hl opt">&gt;</span>
</pre>
This will give the expected result:
<pre class="code-css">@import <span class="hl str">&quot;gradients.less&quot;</span><span class="hl opt">;</span>
@import <span class="hl str">&quot;variables.less&quot;</span><span class="hl opt">;</span>
@import <span class="hl str">&quot;mixins.less&quot;</span><span class="hl opt">;</span>
@import <span class="hl str">&quot;button-groups.less&quot;</span><span class="hl opt">;</span>
@import <span class="hl str">&quot;buttons.less&quot;</span><span class="hl opt">;</span>
@import <span class="hl str">&quot;grid.less&quot;</span><span class="hl opt">;</span>
@import <span class="hl str">&quot;navbar.less&quot;</span><span class="hl opt">;</span>
@import <span class="hl str">&quot;alerts.less&quot;</span><span class="hl opt">;</span>
@import <span class="hl str">&quot;code.less&quot;</span><span class="hl opt">;</span>
@import <span class="hl str">&quot;tables.less&quot;</span><span class="hl opt">;</span>
@import <span class="hl str">&quot;mystyle.less&quot;</span><span class="hl opt">;</span>
</pre>
</p>
<p>
The <span class="icode">defer_</span> attribute is decremented each time the node should be evaluated.
So the first time, the value is 1, so the children are evaluated first, then the
<span class="icode">&lt;hcode&gt;</span> node is returned with a <span class="icode">defer_</span> attribute
decremented, i.e. 0, and with the result of <span class="icode">&lt;include ...&gt;</span>
as children. During the next evaluation, the <span class="icode">&lt;hcode&gt;</span> is evaluated
and it now highlights its children, that is the contents of the included file.
</p>
<p><span class="icode">defer_</span> can take values greater than 1, if you need to nest defered evaluations.</p>
</div>
<div class="article-keywords">
<div class="bloc-keywords">
Domains: <div class="keywords"><a href="../topic_stog.html"><span itemprop="keywords">stog</span>
</a></div>
</div>
<div class="bloc-keywords">
Keywords: <div class="keywords"><a href="../kw_highlight.html"><span itemprop="keywords">highlight</span></a>, <a href="../kw_include.html"><span itemprop="keywords">include</span></a>, <a href="../kw_code.html"><span itemprop="keywords">code</span></a></div>
</div>
</div>

<div class="comments">
<div id="disqus_thread"/>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'stog'; // required: replace example with your forum shortname
    var disqus_url = 'http://zoggy.github.com/stog/including-code-file' ;
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>

</div>

</div>

</div>
<footer id="bottombar">
</footer>
</body>
</html>