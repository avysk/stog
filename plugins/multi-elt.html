<!DOCTYPE HTML>
<html>
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>Stog : Stog-multi-elt</title>
<link href="http://zoggy.github.io/stog/style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="page">
<div class="navbar navbar-fixed-top">
<div class="navbar-inner">
<div class="container">


  <div class="nav-collapse">
    <ul class="nav">
    <li class="&lt;navbar-home/&gt;"><a href="http://zoggy.github.io/stog/index.html">Stog</a></li>
    <li class="&lt;navbar-install/&gt;"><a href="http://zoggy.github.io/stog/install.html">Installation</a></li>
    <li class="&lt;navbar-doc/&gt;"><a href="http://zoggy.github.io/stog/doc.html">Documentation</a></li>
    <li class="active"><a href="http://zoggy.github.io/stog/plugins.html">Plugins</a></li>
    <li class="&lt;navbar-blog/&gt;"><a href="http://zoggy.github.io/stog/blog.html">Blog</a></li>
    <li class="&lt;navbar-about/&gt;"><a href="http://zoggy.github.io/stog/about.html">?</a></li>
  </ul>
  <div class="nav pull-right">  </div>
  </div>

</div>
</div>
</div>

<div id="header">
  
  
  <div class="page-title">Stog-multi-elt</div>
</div>




<p>
This plugin allows the definition of several elements
into one XML file.
</p>

<p>Usage:</p>
<pre class="code-sh">$ stog <span class="hl opt">--</span>package stog.multi<span class="hl opt">-</span>elt ...</pre>

<ul class="toc"><li class="toc-section"><a href="http://zoggy.github.io/stog/plugins/multi-elt.html#example">Example</a></li><li class="toc-section"><a href="http://zoggy.github.io/stog/plugins/multi-elt.html#with-contents">Using &lt;with-contents/&gt;</a></li></ul>
<div class="section"><div class="section-title" id="example">Example</div>
<p>
Suppose we have the following XML document in the
file <code>smallposts.html</code> at the root of a Stog directory:
</p>
<pre class="code-xml"><span class="hl kwa">&lt;multi</span> <span class="hl kwb">sets</span>=<span class="hl str">&quot;smallposts&quot;</span><span class="hl kwa">&gt;</span>
  <span class="hl kwa">&lt;smallpost</span> <span class="hl kwb">id</span>=<span class="hl str">&quot;post1&quot;</span> <span class="hl kwb">title</span>=<span class="hl str">&quot;First post&quot;</span> <span class="hl kwb">date</span>=<span class="hl str">&quot;2014/01/21&quot;</span><span class="hl kwa">&gt;</span>
    The first post ...
  <span class="hl kwa">&lt;/smallpost&gt;</span>
  <span class="hl kwa">&lt;smallpost</span> <span class="hl kwb">id</span>=<span class="hl str">&quot;post2&quot;</span> <span class="hl kwb">title</span>=<span class="hl str">&quot;Second post&quot;</span> <span class="hl kwb">date</span>=<span class="hl str">&quot;2014/01/22&quot;</span><span class="hl kwa">&gt;</span>
    The second post ...
  <span class="hl kwa">&lt;/smallpost&gt;</span>
  <span class="hl kwa">&lt;contents</span> <span class="hl kwb">type</span>=<span class="hl str">&quot;page&quot;</span> <span class="hl kwb">title</span>=<span class="hl str">&quot;My small posts&quot;</span><span class="hl kwa">&gt;</span>
    This is the body of the element <span class="hl str">&quot;/smallpost&quot;</span>.
    We can list our small posts here:
    <span class="hl kwa">&lt;elements</span> <span class="hl kwb">type</span>=<span class="hl str">&quot;smallpost&quot;</span> <span class="hl kwb">set</span>=<span class="hl str">&quot;smallposts&quot;</span><span class="hl kwa">/&gt;</span>
  <span class="hl kwa">&lt;/contents&gt;</span>
<span class="hl kwa">&lt;/multi&gt;</span></pre>
<p>
The <code>muti</code> node at the root of the document indicates that
several elements are defined. The whole element is first read as any
other element: it can have attributes specified for the <code>multi</code>
node, and the body is the contents under this node.
</p>
<p>The multi-elt plugin adds a level -10 to cut the elements of type
&quot;multi&quot;. To do so, each root node of the body is read as if it was
in its own file. Here we declare two elements of type &quot;smallpost&quot;,
with titles, dates and body. The <span class="icode"><span class="hl kwa">&lt;contents&gt;</span></span> node contains
the body of the element &quot;/smallposts&quot;. The two other elements are named
&quot;/smallposts/post1&quot; and &quot;/smallposts/post2&quot;, from the hid of the
element and their respective ids, using a default separator &quot;/&quot;.
The <span class="icode"><span class="hl kwa">&lt;contents&gt;</span></span> node must have a <code>type</code> attribute.
</p>
<p>
All elements share the definitions appearing in the original &quot;multi&quot; element,
here <span class="icode"><span class="hl kwb">sets</span>=<span class="hl str">&quot;smallposts&quot;</span></span>.
</p>
</div>

<div class="section"><div class="section-title" id="naming"> </div>
<p>The hids of the created elements are forged from the hid of the
&quot;multi&quot; element, the <code>id</code> attribute of each &quot;sub&quot; element
and a separator. The default separator is &quot;/&quot; but it can specified
with the <code>hid-sep</code> attribute:
</p>
<pre class="code-xml"><span class="hl kwa">&lt;multi</span> <span class="hl kwb">hid-sep</span>=<span class="hl str">&quot;-&quot;</span> ...<span class="hl kwa">&gt;</span>
  <span class="hl kwa">&lt;smallpost</span> <span class="hl kwb">id</span>=<span class="hl str">&quot;post1&quot;</span> ...<span class="hl kwa">&gt;</span>...<span class="hl kwa">&lt;/smallpost&gt;</span>
  <span class="hl kwa">&lt;smallpost</span> <span class="hl kwb">id</span>=<span class="hl str">&quot;post2&quot;</span> ...<span class="hl kwa">&gt;</span>...<span class="hl kwa">&lt;/smallpost&gt;</span>
  <span class="hl kwa">&lt;contents</span> <span class="hl kwb">type</span>=<span class="hl str">&quot;...&quot;</span><span class="hl kwa">&gt;</span>...<span class="hl kwa">&lt;/contents&gt;</span>
<span class="hl kwa">&lt;/multi&gt;</span></pre>
<p>With the code above, the two &quot;smallpost&quot; elements will have hids
&quot;/smallposts-post1&quot; and &quot;/smallposts-post2&quot;. They can be refered to
for example with <span class="icode"><span class="hl kwa">&lt;elt&gt;</span></span> rule:
</p>
<pre class="code-xml"><span class="hl kwa">&lt;elt</span> <span class="hl kwb">href</span>=<span class="hl str">&quot;/smallposts-post1&quot;</span><span class="hl kwa">/&gt;</span></pre>

</div>

<div class="section"><div class="section-title" id="with-contents">Using &lt;with-contents/&gt;</div>
<p>
As any other element, one can use the <span class="icode"><span class="hl kwb">with-contents</span>=<span class="hl str">&quot;true&quot;</span></span> attribute
to indicate that the body of the element is included in a <span class="icode"><span class="hl kwa">&lt;contents&gt;</span></span> node.
Here is an example using <span class="icode"><span class="hl kwb">with-contnts</span>=<span class="hl str">&quot;true&quot;</span></span> for the multi element,
for the rest of the definition of this elements and for one of the &quot;smallpost&quot; elements:
</p>
<pre class="code-xml"><span class="hl kwa">&lt;multi</span> <span class="hl kwb">sets</span>=<span class="hl str">&quot;smallposts&quot;</span>
  <span class="hl kwb">with-contents</span>=<span class="hl str">&quot;true&quot;</span>
<span class="hl kwa">&gt;</span>
  <span class="hl com">&lt;!-- definition of a rule, shared by all elements --&gt;</span>
  <span class="hl kwa">&lt;st</span> <span class="hl kwb">foo</span>=<span class="hl str">&quot;&quot;</span><span class="hl kwa">&gt;&lt;strong&gt;&lt;contents/&gt;&lt;/strong&gt;&lt;/st&gt;</span>
  <span class="hl com">&lt;!-- body of the &quot;multi&quot; element --&gt;</span>
  <span class="hl kwa">&lt;contents&gt;</span>
    <span class="hl kwa">&lt;smallpost</span> <span class="hl kwb">id</span>=<span class="hl str">&quot;post1&quot;</span> <span class="hl kwb">title</span>=<span class="hl str">&quot;First post&quot;</span> <span class="hl kwb">date</span>=<span class="hl str">&quot;2014/01/21&quot;</span><span class="hl kwa">&gt;</span>
      The first post, with hid = <span class="hl str">&quot;&lt;elt-hid/&gt;&quot;</span>.
    <span class="hl kwa">&lt;/smallpost&gt;</span>

    <span class="hl com">&lt;!-- this element defines a new rule &lt;name&gt;, using with-contents=&quot;true&quot;</span>
<span class="hl com">      and a &lt;contents&gt; node. The new rule is available in this &quot;smallpost&quot;</span>
<span class="hl com">      element only.</span>
<span class="hl com">    --&gt;</span>
    <span class="hl kwa">&lt;smallpost</span> <span class="hl kwb">id</span>=<span class="hl str">&quot;post2&quot;</span> <span class="hl kwb">title</span>=<span class="hl str">&quot;Second post&quot;</span> <span class="hl kwb">date</span>=<span class="hl str">&quot;2014/01/22&quot;</span>
      <span class="hl kwb">with-contents</span>=<span class="hl str">&quot;true&quot;</span><span class="hl kwa">&gt;</span>
      <span class="hl kwa">&lt;name</span> <span class="hl kwb">foo</span>=<span class="hl str">&quot;&quot;</span><span class="hl kwa">&gt;</span>Name: <span class="hl kwa">&lt;st</span> <span class="hl kwb">defer_</span>=<span class="hl str">&quot;1&quot;</span><span class="hl kwa">&gt;&lt;contents/&gt;&lt;/st&gt;&lt;/name&gt;</span>
      <span class="hl kwa">&lt;contents&gt;</span>
        The second post, with hid = <span class="hl str">&quot;&lt;elt-hid/&gt;&quot;</span>.
        <span class="hl kwa">&lt;name&gt;</span>James Bond<span class="hl kwa">&lt;/name&gt;</span>
      <span class="hl kwa">&lt;/contents&gt;</span>
    <span class="hl kwa">&lt;/smallpost&gt;</span>

  <span class="hl com">&lt;!-- The body of the final element with hid &quot;smallposts&quot;.</span>
<span class="hl com">    We use again with-contents=&quot;true&quot; do define a new rule</span>
<span class="hl com">    &lt;hello&gt; for this element only.</span>
<span class="hl com">  --&gt;</span>
  <span class="hl kwa">&lt;contents</span> <span class="hl kwb">type</span>=<span class="hl str">&quot;page&quot;</span> <span class="hl kwb">title</span>=<span class="hl str">&quot;My small posts&quot;</span>
    <span class="hl kwb">with-contents</span>=<span class="hl str">&quot;true&quot;</span><span class="hl kwa">&gt;</span>
    <span class="hl kwa">&lt;hello</span> <span class="hl kwb">name</span>=<span class="hl str">&quot;&quot;</span><span class="hl kwa">&gt;</span>Hello <span class="hl kwa">&lt;if</span> <span class="hl kwb">name</span>=<span class="hl str">&quot;&quot;</span><span class="hl kwa">&gt;&lt;dummy_&gt;</span>world<span class="hl kwa">&lt;/dummy_&gt;&lt;name/&gt;&lt;/if&gt;</span> !<span class="hl kwa">&lt;/hello&gt;</span>
    <span class="hl kwa">&lt;contents&gt;</span>
      <span class="hl kwa">&lt;hello</span> <span class="hl kwb">name</span>=<span class="hl str">&quot;dear reader&quot;</span><span class="hl kwa">/&gt;</span>
      This is the body of the element <span class="hl str">&quot;&lt;elt-hid/&gt;&quot;</span>.
      We can list our small posts here:
      <span class="hl kwa">&lt;elements</span> <span class="hl kwb">type</span>=<span class="hl str">&quot;smallpost&quot;</span> <span class="hl kwb">set</span>=<span class="hl str">&quot;smallposts&quot;</span><span class="hl kwa">/&gt;</span>
    <span class="hl kwa">&lt;/contents&gt;</span> <span class="hl com">&lt;!-- contents of the body of the &quot;main&quot; element&quot; --&gt;</span>
  <span class="hl kwa">&lt;/contents&gt;</span> <span class="hl com">&lt;!-- contents of the &quot;main&quot; element --&gt;</span>
 <span class="hl kwa">&lt;/contents&gt;</span> <span class="hl com">&lt;!-- contents of the multi element --&gt;</span>
<span class="hl kwa">&lt;/multi&gt;</span></pre>
<p>
The result is visible <a href="http://zoggy.github.io/stog/smallposts.html">here</a>.
</p>
</div>








<script src="http://zoggy.github.io/stog/jquery.js" type="text/javascript">_</script>
<script src="http://zoggy.github.io/stog/bootstrap-collapse.js" type="text/javascript">_</script>

</div> 
</body>
</html>